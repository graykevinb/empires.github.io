<!DOCTYPE html>
<html>
  <head>
    <title>List</title>
    <style>
    table,td,th {
      border:solid 1px;
      border-collapse:collapse;
    }
    </style>
  </head>
  <body>
    <a href="file:///C:/Users/kgray/Documents/empires.github.io/index.html">Index</a>
    <a href="file:///C:/Users/kgray/Documents/empires.github.io/delete.html">Delete</a>
    <div>
      <label for="gameid-input">Input gameid</label>
      <input name="gameid" id="gameid-input">
    </div>
    <div>
      <input type="button" value="Submit" onclick="submit()">
    </div>
    <p id="list"></p>

  <script>
    function submit() {
      var gameid = document.getElementById("gameid-input").value;
        console.log(gameid);
        getData(gameid);
    }

    
    function getData(gameid) {
      console.log('Started getData func');
      const Http = new XMLHttpRequest();
      const url = 'https://us-central1-empires-273722.cloudfunctions.net/list/?gameid=' + gameid;
      Http.open("GET", url);
      Http.send();
      Http.onreadystatechange=function() {
        if(this.readyState==4 && this.status==200){
          response = JSON.parse(Http.response);
          console.log(response);
          for (i in response) {
            console.log(response[i]);
            document.getElementById("list").innerHTML += response[i] + "<br>";
          }
        }
      }
    }
  </script>
  </body>
</html>
