<!DOCTYPE html>
<html>
  <head>
    <title>index</title>
    <style>
    table,td,th {
      border:solid 1px;
      border-collapse:collapse;
    }
    </style>
  </head>
  <body>
    <a href="file:///C:/Users/kgray/Documents/empires.github.io/index.html">Index</a>
    <a href="file:///C:/Users/kgray/Documents/empires.github.io/delete.html">Delete</a>
    <div id="join-game">
      <label for="gameid-input">Input gameid to join game</label>
      <input name="gameid" id="gameid-input">
    </div>
    <div id="new-game-div">
      <input type="button" value="New Game" onclick="submit()">
    </div>
    <p id="generated-code"></p>

  <script>
    function submit() {
      var gameid = document.getElementById("gameid-input").value;
        console.log(gameid);
        generateGameCode(gameid);
    }

    
    function generateGameCode() {
      console.log('Started generateGameCode func');
      const Http = new XMLHttpRequest();
      const url = 'https://us-central1-empires-273722.cloudfunctions.net/generate_code';
      //const url = 'https://us-central1-empires-273722.cloudfunctions.net/list/?gameid=' + gameid;
      Http.open("GET", url);
      Http.send();
      Http.onreadystatechange=function() {
        if(this.readyState==4 && this.status==200){
          response = JSON.parse(Http.response);
          console.log(response);
          document.getElementById("generated-code").innerHTML = 'gamecode: ' + response;
          document.getElementById("join-game").remove();
          document.getElementById("new-game-div").remove();
          document.getElementById("join-game").remove();
        }
      }
    }
  </script>
  </body>
</html>
